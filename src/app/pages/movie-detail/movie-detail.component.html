<div class="movie-detail-container" *ngIf="!loading && !error && movie">
  <div class="container">
    <!-- Back Button -->
    <button class="btn btn-outline-primary mb-4" (click)="goBack()">
      ‚Üê Back to Movies
    </button>

    <div class="row">
      <!-- Movie Poster -->
      <div class="col-md-4">
        <img 
          [src]="movieService.getImageUrl(movie.poster_path || '')" 
          [alt]="movie.title + ' movie poster'"
          class="img-fluid movie-poster">
      </div>

      <!-- Movie Details -->
      <div class="col-md-8">
        <h1 class="movie-title">{{ movie.title }}</h1>
        
        <div class="movie-meta mb-3">
          <span class="badge me-2" 
                [class.bg-success]="movie.vote_average >= 8"
                [class.bg-warning]="movie.vote_average >= 6 && movie.vote_average < 8"
                [class.bg-danger]="movie.vote_average < 6">
            ‚≠ê {{ movie.vote_average.toFixed(1) }}/10
          </span>
          <span class="text-muted">{{ movie.release_date.substring(0, 4) }}</span>
          <span class="text-muted ms-3">{{ movie.vote_count }} votes</span>
        </div>

        <div class="movie-overview">
          <h3>Overview</h3>
          <p>{{ movie.overview }}</p>
        </div>

        <div class="movie-stats mt-4">
          <div class="row">
            <div class="col-sm-6">
              <strong>Original Title:</strong> {{ movie.original_title }}
            </div>
            <div class="col-sm-6">
              <strong>Language:</strong> {{ movie.original_language.toUpperCase() }}
            </div>
            <div class="col-sm-6 mt-2">
              <strong>Popularity:</strong> {{ movie.popularity.toFixed(1) }}
            </div>
            <div class="col-sm-6 mt-2">
              <strong>Adult Content:</strong> {{ movie.adult ? 'Yes' : 'No' }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Movie Trailer Section -->
    <div class="row mt-5" *ngIf="movie.trailer_url">
      <div class="col-12">
        <h3 class="mb-3">üé¨ Watch Trailer</h3>
        <div class="trailer-container">
          <iframe 
            [src]="getSafeUrl(movie.trailer_url)"
            class="trailer-iframe"
            frameborder="0" 
            allowfullscreen>
          </iframe>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="loading-container">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading movie details...</span>
  </div>
</div>

<!-- Error State -->
<div *ngIf="error" class="alert alert-danger m-4" role="alert">
  {{ error }}
  <button class="btn btn-outline-danger ms-3" (click)="goBack()">Go Back</button>
</div>